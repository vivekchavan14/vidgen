// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Video {
    id          String   @id @default(cuid())
    title       String
    description String?
    topic       String
    voice       VoiceType
    videoStyle  VideoStyle @default(BRAINROT_CLASSIC)
    status      VideoStatus @default(PENDING)
    scriptText  String?
    audioUrl    String?
    videoUrl    String?
    thumbnailUrl String?
    duration    Int? // in seconds
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt

    @@map("videos")
}

model Job {
    id        String    @id @default(cuid())
    videoId   String
    type      JobType
    status    JobStatus @default(PENDING)
    progress  Int       @default(0)
    metadata  Json?
    error     String?
    startedAt DateTime?
    finishedAt DateTime?
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt

    @@map("jobs")
}

enum VoiceType {
    PETER_GRIFFIN
    STEWIE_GRIFFIN
}

enum VideoStyle {
    BRAINROT_CLASSIC
    SUBWAY_SURFERS
    MINECRAFT_PARKOUR
    FAMILY_GUY_FUNNY_MOMENTS
    SATISFYING_SLIME
    DISCORD_CHAT
    REDDIT_STORY
    ASMR_COOKING
    TIKTOK_COMPILATION
    GAMING_HIGHLIGHTS
}

enum VideoStatus {
    PENDING
    PROCESSING
    COMPLETED
    FAILED
}

enum JobType {
    SCRIPT_GENERATION
    AUDIO_GENERATION
    VIDEO_RENDERING
}

enum JobStatus {
    PENDING
    PROCESSING
    COMPLETED
    FAILED
    CANCELLED
}
